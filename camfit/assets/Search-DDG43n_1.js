import{_ as N,r as I,o as s,c as _,a as i,b as a,w as f,F as L,d as M,e as S,i as U,f as d,g as V,h as K,v as F,n as P,t as b,j as R,p as D,k as Y,R as X,l as j,m as G,L as Q,q as E}from"./index-1JoO1DOR.js";const Z="/assets/logo-camfit-lSdFIJYV.svg",tt={name:"SearchOption",props:{dataArr:{type:Array,required:!1}},setup(){const l=I({value:"popular"}),r=I({group:"location",indexArr:[],title:"전국 지역"}),t=I({group:"popular",indexArr:[],title:"인기 캠핑 지역"}),n=I({group:"concept",indexArr:[],title:"캠핑장 분류"}),h=I({group:"nature",indexArr:[],title:"자연환경"}),w=I({group:"animal",indexArr:[],title:"반려동물동반 여부"}),m=[r,t],g=[n,h,w],k=[r,t,n,h,w],o=U("findArr");return{findArr:o,locationBtn:l,optRadioBtn:m,optCheckBox:g,selected:k,unselect:()=>{const v=document.querySelectorAll(".keyword-btn");for(let p of v)p.classList.remove("select");for(let p of k)p.indexArr=[]},selectAll:()=>{const v=document.querySelectorAll(".keyword-btn");for(let p of v)p.classList.add("select");for(let p of m)for(let u in o[p.group]){if(p.group!=l.value)break;p.indexArr.push(parseInt(u))}for(let p of g)for(let u in o[p.group])p.indexArr.push(parseInt(u));for(let p of k){let u=new Set;for(let z of p.indexArr)u.add(z);p.indexArr=[...u]}},radioToggle:v=>{for(let p of m)v!=l.value&&(p.indexArr=[])}}}},et=l=>(D("data-v-f7f0bdec"),l=l(),Y(),l),ot={class:"container"},at=et(()=>i("div",{class:"title-wrap"},[i("h1",null,[i("img",{class:"logo",src:Z,alt:"캠핏"})]),i("p",{class:"desc"},[S("키워드를 선택하여"),i("br"),S("나만의 캠핑장을 찾아보세요")])],-1)),st={class:"option-wrap"},nt={class:"btn-box"},lt={class:"btn-wrap"},rt=["id","onUpdate:modelValue","value"],ct=["for"],it={class:"category-wrap"},dt={class:"category-title"},mt={class:"btn-box"},pt={class:"btn-wrap"},ut=["id","onUpdate:modelValue","value"],_t=["for"],ft={class:"search-btn-wrap"};function gt(l,r,t,n,h,w){const m=d("v-radio"),g=d("v-radio-group"),k=d("v-btn"),o=d("v-icon");return s(),_("div",ot,[at,i("div",st,[a(g,{inline:"",modelValue:n.locationBtn.value,"onUpdate:modelValue":r[0]||(r[0]=e=>n.locationBtn.value=e)},{default:f(()=>[(s(!0),_(L,null,M(n.optRadioBtn,e=>(s(),V(m,{label:e.title,value:e.group,color:"green-lighten-1",onClick:c=>n.radioToggle(e.group)},null,8,["label","value","onClick"]))),256))]),_:1},8,["modelValue"]),(s(!0),_(L,null,M(n.optRadioBtn,e=>(s(),_("div",nt,[n.locationBtn.value==e.group?(s(!0),_(L,{key:0},M(n.findArr[e.group],(c,y)=>(s(),_("span",lt,[K(i("input",{type:"checkbox",id:c.id,"onUpdate:modelValue":v=>e.indexArr=v,value:y},null,8,rt),[[F,e.indexArr]]),i("label",{for:c.id,class:P(["keyword-btn",e.indexArr.includes(y)?"select":""])},b(c.icon)+b(c.keyword),11,ct)]))),256)):R("",!0)]))),256)),(s(!0),_(L,null,M(n.optCheckBox,e=>(s(),_("div",it,[i("h4",dt,b(e.title),1),i("div",mt,[(s(!0),_(L,null,M(n.findArr[e.group],(c,y)=>(s(),_("span",pt,[K(i("input",{type:"checkbox",id:c.id,"onUpdate:modelValue":v=>e.indexArr=v,value:y},null,8,ut),[[F,e.indexArr]]),i("label",{for:c.id,class:P(["keyword-btn",e.indexArr.includes(y)?"select":""])},b(c.icon)+b(c.keyword),11,_t)]))),256))])]))),256))]),i("div",ft,[a(k,{class:"allselect-btn",onClick:n.selectAll,size:"large",variant:"flat"},{default:f(()=>[S("전체선택")]),_:1},8,["onClick"]),a(k,{class:"unselect-btn",onClick:n.unselect,size:"large",variant:"flat"},{default:f(()=>[a(o,{icon:"mdi-restore"}),S("초기화 ")]),_:1},8,["onClick"]),a(k,{block:"",class:"search-btn",onClick:r[1]||(r[1]=e=>l.emitter.emit("findKeyword",n.selected)),size:"large",variant:"flat"},{default:f(()=>[a(o,{class:"search-icon",icon:"mdi-magnify"}),S("검색하기")]),_:1})])])}const ht=N(tt,[["render",gt],["__scopeId","data-v-f7f0bdec"]]),vt={name:"SearchResult",components:{RouterView:X},props:{dataArr:{type:Array,required:!1},items:{type:Array,required:!1}},methods:{load(){this.dataArr.length>=this.items.length+10?this.items.push(...Array.from({length:10},(l,r)=>r+this.items.at(-1)+1)):this.items.push(...Array.from({length:this.dataArr.length-this.items.length},(l,r)=>r+this.items.at(-1)+1))},makeKeyword(l,r){let t=["animalCmgCl","brazierCl","induty","lctCl","sbrsCl","sbrsEtc","posblFcltyCl"],n=[];return t.forEach((w,m)=>{let g=l[r][w].split(",");m==0?g[0]="반려동물동반 "+g:m==1&&(g[0]=g+"화로대"),n.push(...g)}),n.filter(Boolean)}}},kt={class:"result-info"},wt={key:0},At={key:1},bt={class:"camping-title"},yt={class:"camping-title-icon"},Ct={key:0,class:"camping-subtitle"},St={key:1,class:"camping-desc"},xt={class:"camping-contact-wrap mb-12 mb-md-auto"},Vt={key:0,class:"camping-contact"},It={class:"camping-contact-addr"},Lt={key:1,class:"camping-contact"},zt={class:"camping-contact-tel"},Bt={class:"camping-facility"},Mt={class:"camping-facility-item"},$t={class:"result-more"},Rt={key:0,class:"result-more-end"};function Ut(l,r,t,n,h,w){const m=d("v-icon"),g=d("router-link"),k=d("v-img"),o=d("v-col"),e=d("v-row"),c=d("v-btn"),y=d("v-infinite-scroll"),v=d("RouterView");return s(),_(L,null,[i("div",kt,[t.dataArr.length==0?(s(),_("p",wt,[a(m,{class:"result-info-icon",icon:"mdi-alert-circle-outline"}),S(" 선택하신 조건에 맞는 캠핑장이 없습니다. 조건을 다시 선택 후 검색해주세요. ")])):(s(),_("p",At,[a(m,{class:"result-info-icon",icon:"mdi-magnify"}),S(" 캠핑장 "),i("strong",null,b(t.dataArr.length)+"곳",1),S("을 소개해드리겠습니다 ")]))]),a(y,{class:"result-list"},{default:f(()=>[(s(!0),_(L,null,M(t.items,(p,u)=>(s(),V(e,{key:p,class:"camping-wrap"},{default:f(()=>[a(o,{cols:"12",md:"7"},{default:f(()=>[a(g,{to:{name:"search/id",params:{id:t.dataArr[u].contentId},state:{arr:t.dataArr}}},{default:f(()=>[i("h3",bt,b(t.dataArr[u].facltNm),1),i("span",yt,[a(m,{end:"",icon:"mdi-open-in-new"}),S(" 자세히 보기 ")])]),_:2},1032,["to"]),t.dataArr[u].firstImageUrl!=""?(s(),V(k,{key:0,class:"camping-img","aspect-ratio":"2",src:t.dataArr[u].firstImageUrl,cover:""},null,8,["src"])):(s(),V(k,{key:1,class:"camping-img","aspect-ratio":"2",src:"https://github.com/suunzuu/portfolio/blob/main/img/no-img.jpg?raw=true",alt:"캠핑장 이미지 준비중",cover:""}))]),_:2},1024),a(o,{cols:"12",md:"5",class:"camping-desc-wrap pt-0 pt-md-12"},{default:f(()=>[t.dataArr[u].lineIntro!=""?(s(),_("p",Ct,b(t.dataArr[u].lineIntro),1)):R("",!0),t.dataArr[u].featureNm!=""?(s(),_("p",St,b(t.dataArr[u].featureNm),1)):R("",!0),i("div",xt,[t.dataArr[u].addr1!=""?(s(),_("span",Vt,[a(m,{icon:"mdi-map-marker",class:"camping-contact-icon"}),i("span",It,b(t.dataArr[u].addr1),1)])):R("",!0),t.dataArr[u].tel!=""?(s(),_("span",Lt,[a(m,{icon:"mdi-phone",class:"camping-contact-icon"}),i("span",zt,b(t.dataArr[u].tel),1)])):R("",!0)]),i("div",Bt,[(s(!0),_(L,null,M(w.makeKeyword(t.dataArr,u),z=>(s(),_("span",Mt,b(z),1))),256))])]),_:2},1024)]),_:2},1024))),128)),i("div",$t,[t.dataArr.length<=t.items.length?(s(),_("p",Rt,[a(m,{class:"mt-n2",icon:"mdi-check-bold"}),S(" 마지막 검색 결과 입니다 ")])):(s(),V(c,{key:1,class:"result-more-btn",onClick:j(w.load,["stop"]),flat:"",size:"x-large"},{default:f(()=>[S(" 검색결과 더보기 "),a(m,{icon:"mdi-plus-thick"})]),_:1},8,["onClick"]))])]),_:1}),a(v)],64)}const Nt=N(vt,[["render",Ut],["__scopeId","data-v-4566c627"]]),H=l=>(D("data-v-6b763a01"),l=l(),Y(),l),Ot={class:"result-info"},Tt=H(()=>i("div",{id:"map"},"캠핑지도",-1)),qt={class:"select-location-wrap"},Et=H(()=>i("h3",{class:"select-location-title mb-7"},"관심있는 캠핑지역을 선택해 지도로 확인해 보세요",-1)),jt={key:0,class:"pop-info"},Kt={key:1,class:"pop-info"},Ft={name:"ShowMap",data(){return{drawer:null,dialog:!1}}},Pt=Object.assign(Ft,{setup(l){const r=U("dataArrAll"),t=U("findArr"),n=[];for(let o of t.location)n.push(o.keyword);const h=I({select:""}),w=o=>{const e=[];for(let c of r)c.doNm==o&&e.push(c);k(e)},m=I({isLoading:!1}),g=()=>{console.log("loadScript실행");const o=document.createElement("script");document.createElement("type"),o.src="//dapi.kakao.com/v2/maps/sdk.js?appkey=68a864de58e6edc8060b1ea8bf5fcdf1&autoload=false&libraries=clusterer",o.type="text/javascript",o.onload=()=>window.kakao.maps.load(k),document.head.appendChild(o)},k=o=>{setTimeout(()=>{if(m.isLoading=!0,o){let T=function(A,B,$){return function(){C[B]?($.setMap(A),C[B]=!C[B]):($.setMap(null),C[B]=!C[B])}},J=function(A){return function(){A.setMap(null),C.fill=!0}};console.log("loadMap실행",o);const e=new window.kakao.maps.LatLng(36.2683,127.6358),c=document.getElementById("map"),y={center:e,level:13};let v=new window.kakao.maps.Map(c,y);const p=[],u="/src/assets/marker.svg",z=new window.kakao.maps.Size(40,55),O={offset:new window.kakao.maps.Point(0,70)},x=new window.kakao.maps.MarkerImage(u,z,O);o.forEach((A,B)=>{const $=new window.kakao.maps.Marker({map:v,position:new window.kakao.maps.LatLng(A.mapY,A.mapX),clickable:!0,image:x});p.push($);const W=` <div class="custom-wrap pa-3">
              <div class="custom-title-wrap  pb-1 mb-2">
                <h5 class="custom-title">${A.facltNm}</h5>
                <p class="custom-addr mt-n1">${A.addr1}</p>
              </div>
              <div class="custom-desc-wrap">
                <div class="custom-img">
                  <img src="${A.firstImageUrl}" alt="캠핑장 이미지" /> 
                </div>
                <div class="custom-desc-box pt-1">
                  <div class="custom-desc mb-1">
                    <span class="custom-desc-icon material-symbols-outlined">camping</span> 
                    <p>${A.induty}</p>
                  </div>
                  <div class="custom-desc">
                    <span class="custom-desc-icon material-symbols-outlined">pets</span>
                    <p>반려동물 동반 ${A.animalCmgCl}</p>
                  </div>
                  <div class="custom-desc">
                    <span class="custom-desc-icon material-symbols-outlined">settings_heart</span>
                    <p> ${A.sbrsCl}</p>
                  </div>
                  <div class="custom-desc">
                    <span class="material-symbols-outlined">calendar_month</span>
                    <p> ${A.operDeCl}</p>
                  </div>
                </div>
              </div>
              </div>`,q=new window.kakao.maps.CustomOverlay({map:v,position:$.getPosition(),content:W,zIndex:1e4,xAnchor:0,yAnchor:0});q.setMap(null),kakao.maps.event.addListener($,"click",T(v,B,q)),kakao.maps.event.addListener(v,"click",J(q))});let C=Array(o.length).fill(!0);new window.kakao.maps.MarkerClusterer({map:v,averageCenter:!0,minLevel:7,minClusterSize:5,styles:[{minWidth:"100px",height:"80px",padding:"0px 10px",color:"rgb(255, 255, 255)",fontSize:"25px",lineHeight:"78px",textAlign:"center",borderRadius:"100px",backgroundColor:"rgb(95, 95, 95)",whiteSpace:"nowrap",position:"relative",opacity:"0.75",textShadow:"0 0 5px rgba(0,0,0,1)",zIndex:"-1000"}]}).addMarkers(p),m.isLoading=!1}},100)};return G(()=>{g()}),(o,e)=>{const c=d("v-btn"),y=d("v-navigation-drawer"),v=d("v-icon"),p=d("v-select"),u=d("v-snackbar"),z=d("v-dialog"),O=d("v-layout");return s(),V(O,null,{default:f(()=>[a(y,{style:{width:"100%"},modelValue:o.drawer,"onUpdate:modelValue":e[1]||(e[1]=x=>o.drawer=x),location:"right",temporary:""},{default:f(()=>[i("p",Ot,b(h.select)+" 지역의 캠핑장 지도입니다",1),a(c,{class:"close-btn pt-1",onClick:e[0]||(e[0]=j(x=>o.drawer=!o.drawer,["stop"])),icon:"mdi-close-thick",size:"x-large"}),Tt,m.isLoading?(s(),V(Q,{key:0})):R("",!0)]),_:1},8,["modelValue"]),a(z,{modelValue:o.dialog,"onUpdate:modelValue":e[5]||(e[5]=x=>o.dialog=x),persistent:"",width:"960"},{activator:f(({props:x})=>[a(c,E({class:"show-map-btn"},x,{size:"large",flat:""}),{default:f(()=>[a(v,{class:"show-map-icon",icon:"mdi-map-marker"}),S("지도로 검색하기 ")]),_:2},1040)]),default:f(({isActive:x})=>[i("div",qt,[Et,a(p,{class:"mb-10 w-75 mx-auto",label:"캠핑지역 선택",modelValue:h.select,"onUpdate:modelValue":e[2]||(e[2]=C=>h.select=C),items:n,rounded:"pill","prepend-inner-icon":"mdi-map-marker",variant:"outlined"},null,8,["modelValue"]),a(u,{timeout:2e3,rounded:"pill"},{activator:f(({props:C})=>[h.select==""?(s(),V(c,E({key:0,class:"select-location-btn",text:"캠핑지도보기"},C,{size:"x-large",flat:""}),null,16)):(s(),V(c,E({key:1,class:"select-location-btn",onClick:[e[3]||(e[3]=j(T=>(o.drawer=!o.drawer,o.dialog=!1),["stop"])),e[4]||(e[4]=T=>w(h.select))],text:"캠핑지도보기"},C,{size:"x-large",flat:""}),null,16))]),default:f(()=>[h.select==""?(s(),_("span",jt,"지역을 선택해주세요")):(s(),_("span",Kt,"결과 확인 중입니다."))]),_:1}),a(c,{class:"close-btn pt-1",onClick:C=>x.value=!1,icon:"mdi-close-thick",size:"large"},null,8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}}}),Dt=N(Pt,[["__scopeId","data-v-6b763a01"]]),Yt={name:"Search",components:{SearchOption:ht,SearchResult:Nt,ShowMap:Dt},setup(){const l=U("dataArrAll"),r=l,t=U("findArr");return{dataArrAll:l,dataArr:r,findArr:t}},data(){return{items:Array.from({length:30},(l,r)=>r+1)}},created(){this.emitter.on("findKeyword",this.findKeyword)},methods:{findKeyword(l){let r=new Set;for(let t of this.dataArrAll)r.add(t);for(let t of l){let n=new Set;for(let h=0;h<t.indexArr.length;h++){let w=this.findArr[t.group][t.indexArr[h]].keyword,m=this.findArr[t.group][t.indexArr[h]].category;for(let g of r){let k=g[m].split(",");for(let o of k)o===w&&n.add(g)}h==t.indexArr.length-1&&(r=n)}}return this.dataArr=[...r],this.dataArr.length<=30?this.items=Array.from({length:this.dataArr.length},(t,n)=>n+1):this.items=Array.from({length:30},(t,n)=>n+1),document.querySelector(".v-infinite-scroll").scrollTo({top:0,behavior:"smooth"}),console.log("검색결과",this.dataArr),this.dataArr}}};function Ht(l,r,t,n,h,w){const m=d("SearchOption"),g=d("v-sheet"),k=d("v-col"),o=d("SearchResult"),e=d("ShowMap"),c=d("v-row");return s(),V(c,{height:"100vh",class:"wrap"},{default:f(()=>[a(k,{cols:"12",lg:"3"},{default:f(()=>[a(g,{class:"search-option elevation-3"},{default:f(()=>[a(m,{dataArr:n.dataArr},null,8,["dataArr"])]),_:1})]),_:1}),a(k,{cols:"12",lg:"9"},{default:f(()=>[a(g,{class:"search-result elevation-3"},{default:f(()=>[a(o,{dataArr:n.dataArr,items:h.items},null,8,["dataArr","items"]),a(g,{class:"show-map"},{default:f(()=>[a(e)]),_:1})]),_:1})]),_:1})]),_:1})}const Xt=N(Yt,[["render",Ht],["__scopeId","data-v-9d849aec"]]);export{Xt as default};
